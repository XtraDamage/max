<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Max Replica Ultimate Dark</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap');
        @import url('https://fonts.cdnfonts.com/css/sf-pro-display');

        body {
            font-family: 'SF Pro Display', -apple-system, BlinkMacSystemFont, 'Roboto', sans-serif;
            background-color: #000;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            height: 100vh;
            overflow: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        #app-frame {
            width: 100%;
            max-width: 414px;
            height: 100%;
            background-color: #0d0d0f;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- –ì—Ä–∞–¥–∏–µ–Ω—Ç (–°–µ–≤–µ—Ä–Ω–æ–µ —Å–∏—è–Ω–∏–µ) --- */
        .top-glow {
            position: absolute;
            top: -120px;
            left: -50%;
            width: 200%;
            height: 300px;
            background: linear-gradient(to right, 
                rgba(0, 255, 255, 0) 0%,
                rgba(0, 255, 255, 0.4) 15%, 
                rgba(0, 140, 255, 0.5) 25%,
                rgba(140, 0, 255, 0.5) 35%,
                rgba(255, 0, 140, 0.4) 50%,
                rgba(0, 140, 255, 0.5) 65%,
                rgba(0, 255, 255, 0.4) 75%,
                rgba(0, 255, 255, 0) 100%
            );
            background-size: 200% auto;
            z-index: 0;
            pointer-events: none;
            filter: blur(10px);
            animation: aurora 30s linear infinite;
            opacity: 0.9;
            -webkit-mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%);
            mask-image: linear-gradient(to bottom, rgba(0,0,0,1) 0%, rgba(0,0,0,1) 60%, rgba(0,0,0,0) 100%);
        }

        @keyframes aurora {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-6px); }
        }
        .logo-floating {
            animation: float 4s ease-in-out infinite;
        }

        .spinner-btn {
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s linear infinite;
        }
        @keyframes spin { to { transform: rotate(360deg); } }

        input:focus { outline: none; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .hidden-screen { display: none !important; }
        .flex-screen { display: flex !important; }

        .vk-btn {
            background-color: #2D2E33;
            color: #76787A;
            transition: all 0.2s;
        }
        .vk-btn:disabled {
            background-color: #2D2E33;
            color: #76787A;
            cursor: not-allowed;
        }
        .vk-btn.active-btn {
            background-color: #007AFF;
            color: #FFFFFF;
            cursor: pointer;
        }

        .phone-input-container {
            background-color: #1c1c1e;
            border-radius: 12px;
            transition: background-color 0.2s;
            border: 1px solid rgba(255,255,255,0.08);
            display: flex;
            align-items: center;
            padding: 0 14px;
            height: 50px;
        }
        .phone-input-container:focus-within {
            background-color: #262629;
            border-color: rgba(255,255,255,0.15);
        }
        #country-trigger {
            display: flex;
            align-items: center;
            cursor: pointer;
            padding-right: 10px;
            border-right: 1px solid rgba(255,255,255,0.1);
            margin-right: 10px;
        }
        #current-flag {
            display: flex;
            align-items: center;
            margin-right: 6px;
        }
        #current-flag img {
            width: 16px;
            height: 16px;
            object-fit: contain;
        }
        #current-code {
            font-size: 16px;
            color: #fff;
            font-weight: 500;
        }
        #phone {
            flex: 1;
            background: transparent;
            font-size: 16px;
            color: #fff;
            font-weight: 500;
            height: 100%;
            margin-top: 2px;
        }
        #phone::placeholder {
            color: #8e8e93;
        }

        .sms-code-box {
            width: 48px;
            height: 56px;
            background-color: #2c2c2e;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            font-weight: 500;
            color: white;
            transform: scale(1);
            text-shadow: none;
            transition: color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .sms-code-box.focused .cursor {
            display: block;
            width: 2px;
            height: 28px;
            background-color: #0077FF;
            animation: blink 1s step-end infinite;
        }
        
        .sms-code-box.filled {
            color: #34c759;
            transform: none;
            text-shadow: none;
        }

        .sms-code-box.filled-settled {
            transform: none;
            text-shadow: none;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }

        .modal-overlay {
            position: absolute;
            inset: 0;
            background: rgba(0,0,0,0.6);
            backdrop-filter: blur(5px);
            z-index: 100;
            display: flex;
            align-items: flex-end; 
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        .modal-overlay.active {
            opacity: 1;
            pointer-events: auto;
        }
        
        .bottom-sheet {
            width: 100%;
            background: #1c1c1e;
            border-radius: 20px 20px 0 0;
            padding: 0;
            transform: translateY(100%);
            transition: transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1);
            border-top: 1px solid rgba(255,255,255,0.1);
            max-height: 80vh;
            display: flex;
            flex-direction: column;
        }
        .modal-overlay.active .bottom-sheet {
            transform: translateY(0);
        }

        .center-modal {
            background: #1c1c1e;
            width: 85%;
            margin: auto;
            border-radius: 20px;
            padding: 24px;
            transform: scale(0.9);
            transition: transform 0.2s;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .modal-overlay.active .center-modal {
            transform: scale(1);
        }

        .country-header {
            padding: 16px 20px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        .drag-handle {
            width: 40px;
            height: 4px;
            background: #3a3a3c;
            border-radius: 2px;
            position: absolute;
            top: 8px;
            left: 50%;
            transform: translateX(-50%);
        }

        .country-list {
            overflow-y: auto;
            padding: 0 20px 20px 20px;
        }
        .country-item {
            display: flex;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            cursor: pointer;
        }
        .country-item:last-child { border-bottom: none; }
        .country-item:active { opacity: 0.7; }
        
        /* –£–º–µ–Ω—å—à–∏–ª —Ä–∞–∑–º–µ—Ä –∏–∫–æ–Ω–∫–∏ —Ñ–ª–∞–≥–∞ –¥–æ 16px */
        .country-item .flag-img {
            width: 16px;
            height: 16px;
            object-fit: contain;
            margin-right: 14px;
            display: block;
        }

        .dark-bg { background-color: #0d0d0f; }
        .dark-header { background-color: #0d0d0f; }
        .dark-nav { background-color: #0d0d0f; }
        
        .header-btn {
            background-color: #2b2b2d;
            border-radius: 12px;
        }
        .banner-pattern {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2'%3E%3C/path%3E%3Ccircle cx='8.5' cy='7' r='4'%3E%3C/circle%3E%3Cline x1='20' y1='8' x2='20' y2='14'%3E%3C/line%3Cline x1='23' y1='11' x2='17' y2='11'%3E%3C/line%3E%3C/svg%3E");
            background-size: 40px 40px;
            opacity: 0.08;
            mask-image: linear-gradient(to right, rgba(0,0,0,1) 0%, rgba(0,0,0,0.1) 100%);
            -webkit-mask-image: linear-gradient(to right, rgba(0,0,0,1) 0%, rgba(0,0,0,0.1) 100%);
        }
        .glass-icon-bg {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
    </style>
</head>
<body>

    <div id="app-frame">
        
        <!-- 1. LOGIN SCREEN -->
        <div id="login" class="absolute inset-0 z-40 flex flex-col relative overflow-hidden h-full">
            <div class="top-glow"></div>

            <div class="relative z-10 flex flex-col h-full w-full px-5 py-5 justify-between">
                <div class="w-full flex flex-col items-center">
                    <div class="w-full flex justify-between items-start pt-4 mb-8">
                        <div class="w-8"></div>
                        <div class="flex items-center justify-center ml-2 mt-1">
                             <img src="https://raw.githubusercontent.com/XtraDamage/max/refs/heads/main/%D0%91%D0%B5%D0%B7%20%D0%BD%D0%B0%D0%B7%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F149_20251201215353.png" 
                                  class="w-[90px] h-[38px] object-contain drop-shadow-[0_0_12px_rgba(0,85,255,0.5)] logo-floating" alt="MAX">
                        </div>
                        <div id="help-btn" class="w-8 h-8 rounded-full flex items-center justify-center cursor-pointer opacity-70 hover:opacity-100 transition-opacity">
                            <svg width="22" height="22" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="white" stroke-width="1.5"/>
                                <path d="M10 9C10 7.89543 10.8954 7 12 7C13.1046 7 14 7.89543 14 9C14 9.933 13.333 10.5 12.5 11C12 11.3 12 11.8 12 12.5" stroke="white" stroke-width="1.5" stroke-linecap="round"/>
                                <circle cx="12" cy="16" r="1" fill="white"/>
                            </svg>
                        </div>
                    </div>

                    <h1 class="text-[20px] font-bold text-center leading-snug mb-2 text-white tracking-wide drop-shadow-md relative z-20">
                        –° –∫–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º<br>—Ç–µ–ª–µ—Ñ–æ–Ω–∞ —Ö–æ—Ç–∏—Ç–µ –≤–æ–π—Ç–∏?
                    </h1>
                    <p class="text-[#818C99] text-[14px] mb-6 font-normal text-center relative z-20">
                        –ù–∞ –Ω–µ–≥–æ –ø—Ä–∏–¥—ë—Ç –°–ú–° —Å –∫–æ–¥–æ–º
                    </p>

                    <div class="w-full phone-input-container mb-3 relative z-20">
                        <div id="country-trigger">
                            <span id="current-flag">
                                <img src="https://em-content.zobj.net/source/apple/419/flag-russia_1f1f7-1f1fa.png" class="w-6 h-6 object-contain">
                            </span>
                            <span id="current-code">+7</span>
                        </div>
                        <input type="tel" id="phone" placeholder="123 456 78 90">
                    </div>
                    
                    <p class="text-[#65666B] text-[12px] leading-4 text-center px-2 relative z-20">
                        –î–ª—è –≤—Ö–æ–¥–∞ –Ω—É–∂–µ–Ω –Ω–æ–º–µ—Ä –∏–∑ –†–æ—Å—Å–∏–∏ –∏–ª–∏ —Å—Ç—Ä–∞–Ω—ã –∏–∑ —Å–ø–∏—Å–∫–∞ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –Ω–∞ —Ñ–ª–∞–≥, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å
                    </p>
                </div>

                <div class="w-full mb-5 relative z-20">
                    <button id="btn-continue" disabled class="vk-btn w-full h-[48px] rounded-xl font-bold text-[16px] mb-4 flex items-center justify-center">
                        –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
                    </button>
                    <div class="text-center text-[#65666B] text-[11px] leading-4 px-2 font-normal">
                        –ù–∞–∂–∏–º–∞—è ¬´–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å¬ª, –≤—ã –ø—Ä–∏–Ω–∏–º–∞–µ—Ç–µ<br> 
                        <span id="link-policy" class="text-[#9ea0a5] hover:text-white cursor-pointer transition-colors border-b border-transparent hover:border-white/50">–ø–æ–ª–∏—Ç–∏–∫—É –ø—É—Ç–∏–Ω–∞</span> –∏ <span id="link-terms" class="text-[#9ea0a5] hover:text-white cursor-pointer transition-colors border-b border-transparent hover:border-white/50">—Ä–∞–±—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 2. SMS VERIFY SCREEN -->
        <div id="sms-verify" class="absolute inset-0 z-35 flex flex-col h-full hidden-screen">
            <div class="relative z-10 flex flex-col h-full w-full px-5 py-5 justify-between">
                
                <div class="w-full flex flex-col items-center">
                    <div class="w-full flex justify-between items-start pt-4 mb-8">
                        <div id="btn-sms-back" class="w-8 h-8 rounded-full flex items-center justify-center cursor-pointer opacity-70 hover:opacity-100 transition-opacity -ml-2">
                             <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"></path></svg>
                        </div>
                        <div class="w-8"></div>
                    </div>

                    <h1 class="text-[20px] font-bold text-center leading-snug mb-2 text-white tracking-wide drop-shadow-md relative z-20">
                        –ö–∞–∫–æ–π –∫–æ–¥ –ø—Ä–∏—à—ë–ª –≤ –°–ú–°?
                    </h1>
                    <p id="sms-info-text" class="text-[#818C99] text-[14px] mb-6 font-normal text-center relative z-20 px-4">
                        –û—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –Ω–∞ +7 999 888 77 66. <br>–ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ–≤–µ—Ä–Ω—ã–π, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞–∑–∞–¥.
                    </p>

                    <div class="flex space-x-2 justify-center w-full mb-6 relative z-20">
                        <div id="code-box-0" class="sms-code-box focused">
                            <span class="cursor" style="display: block;"></span>
                        </div>
                        <div id="code-box-1" class="sms-code-box"></div>
                        <div id="code-box-2" class="sms-code-box"></div>
                        <div id="code-box-3" class="sms-code-box"></div>
                        <div id="code-box-4" class="sms-code-box"></div>
                        <div id="code-box-5" class="sms-code-box"></div>
                    </div>
                </div>

                <div class="w-full mb-5 relative z-20">
                    <p class="text-[#65666B] text-[14px] text-center">
                        –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–¥ –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑ 0:56
                    </p>
                </div>
            </div>
        </div>


        <!-- MODAL: COUNTRY SELECTOR -->
        <div id="modal-country" class="modal-overlay">
            <div class="bottom-sheet">
                <div class="country-header">
                    <div class="drag-handle"></div>
                </div>
                <div class="country-list no-scrollbar">
                    <!-- Russia -->
                    <div class="country-item" onclick="selectCountry('ru', '+7', 'https://em-content.zobj.net/source/apple/419/flag-russia_1f1f7-1f1fa.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-russia_1f1f7-1f1fa.png" class="flag-img" alt="RU">
                        <span class="text-white text-[17px] font-medium flex-1">–†–æ—Å—Å–∏—è</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+7</span>
                    </div>
                    <!-- Belarus -->
                    <div class="country-item" onclick="selectCountry('by', '+375', 'https://em-content.zobj.net/source/apple/419/flag-belarus_1f1e7-1f1fe.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-belarus_1f1e7-1f1fe.png" class="flag-img" alt="BY">
                        <span class="text-white text-[17px] font-medium flex-1">–ë–µ–ª–∞—Ä—É—Å—å</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+375</span>
                    </div>
                    <!-- Azerbaijan -->
                    <div class="country-item" onclick="selectCountry('az', '+994', 'https://em-content.zobj.net/source/apple/419/flag-azerbaijan_1f1e6-1f1ff.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-azerbaijan_1f1e6-1f1ff.png" class="flag-img" alt="AZ">
                        <span class="text-white text-[17px] font-medium flex-1">–ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+994</span>
                    </div>
                    <!-- Armenia -->
                    <div class="country-item" onclick="selectCountry('am', '+374', 'https://em-content.zobj.net/source/apple/419/flag-armenia_1f1e6-1f1f2.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-armenia_1f1e6-1f1f2.png" class="flag-img" alt="AM">
                        <span class="text-white text-[17px] font-medium flex-1">–ê—Ä–º–µ–Ω–∏—è</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+374</span>
                    </div>
                    <!-- Kazakhstan -->
                    <div class="country-item" onclick="selectCountry('kz', '+7', 'https://em-content.zobj.net/source/apple/419/flag-kazakhstan_1f1f0-1f1ff.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-kazakhstan_1f1f0-1f1ff.png" class="flag-img" alt="KZ">
                        <span class="text-white text-[17px] font-medium flex-1">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+7</span>
                    </div>
                    <!-- Kyrgyzstan -->
                    <div class="country-item" onclick="selectCountry('kg', '+996', 'https://em-content.zobj.net/source/apple/419/flag-kyrgyzstan_1f1f0-1f1ec.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-kyrgyzstan_1f1f0-1f1ec.png" class="flag-img" alt="KG">
                        <span class="text-white text-[17px] font-medium flex-1">–ö—ã—Ä–≥—ã–∑—Å—Ç–∞–Ω</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+996</span>
                    </div>
                    <!-- Moldova -->
                    <div class="country-item" onclick="selectCountry('md', '+373', 'https://em-content.zobj.net/source/apple/419/flag-moldova_1f1f2-1f1e9.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-moldova_1f1f2-1f1e9.png" class="flag-img" alt="MD">
                        <span class="text-white text-[17px] font-medium flex-1">–ú–æ–ª–¥–æ–≤–∞</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+373</span>
                    </div>
                    <!-- Tajikistan -->
                    <div class="country-item" onclick="selectCountry('tj', '+992', 'https://em-content.zobj.net/source/apple/419/flag-tajikistan_1f1f9-1f1ef.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-tajikistan_1f1f9-1f1ef.png" class="flag-img" alt="TJ">
                        <span class="text-white text-[17px] font-medium flex-1">–¢–∞–¥–∂–∏–∫–∏—Å—Ç–∞–Ω</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+992</span>
                    </div>
                    <!-- Uzbekistan -->
                    <div class="country-item" onclick="selectCountry('uz', '+998', 'https://em-content.zobj.net/source/apple/419/flag-uzbekistan_1f1fa-1f1ff.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-uzbekistan_1f1fa-1f1ff.png" class="flag-img" alt="UZ">
                        <span class="text-white text-[17px] font-medium flex-1">–£–∑–±–µ–∫–∏—Å—Ç–∞–Ω</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+998</span>
                    </div>
                     <!-- Georgia -->
                     <div class="country-item" onclick="selectCountry('ge', '+995', 'https://em-content.zobj.net/source/apple/419/flag-georgia_1f1ec-1f1ea.png')">
                        <img src="https://em-content.zobj.net/source/apple/419/flag-georgia_1f1ec-1f1ea.png" class="flag-img" alt="GE">
                        <span class="text-white text-[17px] font-medium flex-1">–ì—Ä—É–∑–∏—è</span>
                        <span class="text-[#8e8e93] text-[17px] font-medium">+995</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- MODAL: INFO (Legal/Help) -->
        <div id="modal-info" class="modal-overlay" style="align-items: center; justify-content: center;">
            <div class="center-modal">
                <div id="info-content-text" class="hidden">
                    <h3 id="info-title" class="text-white text-[18px] font-bold mb-2">–ó–∞–≥–æ–ª–æ–≤–æ–∫</h3>
                    <p class="text-[#8e8e93] mb-4">–¢–µ–∫—Å—Ç –∑–∞–≥–ª—É—à–∫–∞</p>
                </div>
                
                <div id="info-content-img" class="hidden flex flex-col items-center">
                    <div class="w-full h-[150px] bg-[#2c2c2e] rounded-xl flex items-center justify-center mb-4 border border-white/5">
                        <img src="https://opis-cdn.tinkoffjournal.ru/mercury/01-death-in-poverty.jpg?preset=image_570w_2x" class="w-30 h-15">
                    </div>
                    <p class="text-white font-medium">—Å–∞–º —Ä–∞–∑–±–∏—Ä–∞–π—Å—è</p>
                </div>

                <button id="close-info" class="w-full bg-[#0077FF] text-white py-3 rounded-xl font-medium mt-2">–ü–æ–Ω—è—Ç–Ω–æ</button>
            </div>
        </div>


        <!-- 3. CHATS SCREEN -->
        <div id="chats" class="absolute inset-0 dark-bg z-30 flex flex-col hidden-screen">
            <!-- Header -->
            <div class="px-4 pt-4 pb-2 flex items-center justify-between dark-header z-10">
                <h1 class="text-[28px] font-bold text-white tracking-wide">–ß–∞—Ç—ã</h1>
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 header-btn flex items-center justify-center cursor-pointer">
                        <svg class="w-5 h-5 text-[#8e8e93]" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                    </div>
                    <div class="w-10 h-10 bg-[#0077FF] rounded-[12px] flex items-center justify-center cursor-pointer hover:bg-[#0066dd] transition-colors">
                        <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4"></path></svg>
                    </div>
                </div>
            </div>
            <!-- Tabs -->
            <div class="px-4 pb-0 flex items-end justify-between dark-header flex-shrink-0 z-10">
                <div class="flex space-x-5">
                    <div class="pb-3 border-b-[3px] border-[#0077FF] cursor-pointer relative top-[1px]"><span class="text-[17px] font-semibold text-white">–í—Å–µ</span></div>
                    <div class="pb-3 cursor-pointer flex items-center group relative top-[1px]"><span class="text-[17px] font-medium text-[#8e8e93] group-hover:text-white transition-colors">–ù–æ–≤—ã–µ</span></div>
                    <div class="pb-3 cursor-pointer flex items-center group relative top-[1px]"><span class="text-[17px] font-medium text-[#8e8e93] group-hover:text-white transition-colors">–õ–∏—á–Ω—ã–µ</span></div>
                </div>
            </div>
            <!-- Scrollable Content -->
            <div class="flex-1 overflow-y-auto no-scrollbar dark-bg relative" id="chats-container">
                <div class="mx-3 my-3 h-[88px] bg-gradient-to-r from-[#0066FF] to-[#0099FF] rounded-[22px] flex items-center justify-between relative overflow-hidden flex-shrink-0 cursor-pointer">
                    <div class="absolute inset-0 banner-pattern pointer-events-none"></div>
                    <div class="z-10 text-white pl-5 py-3 flex flex-col justify-center h-full">
                        <div class="font-bold text-[19px] leading-6 mb-1">–ü–æ–¥–∫–ª—é—á–∏—Ç–µ<br>–∫–æ–Ω—Ç–∞–∫—Ç—ã</div>
                        <div class="text-[13px] opacity-80 font-normal">–ß—Ç–æ–±—ã –Ω–∞–π—Ç–∏ –∑–¥–µ—Å—å –∑–Ω–∞–∫–æ–º—ã—Ö</div>
                    </div>
                    <div class="z-10 pr-5 flex items-center justify-center h-full">
                        <div class="w-12 h-12 glass-icon-bg rounded-full flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"></path></svg>
                        </div>
                    </div>
                </div>
            </div>
             <!-- Bottom Nav (–û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–∫–æ–Ω–∫–∏) -->
             <div class="h-[84px] dark-nav flex justify-between px-2 items-start pt-2 flex-shrink-0 pb-6 relative z-20">
                <div class="flex flex-col items-center justify-center cursor-pointer w-1/4 group">
                    <div class="w-[28px] h-[28px] mb-[2px] text-[#8e8e93] group-hover:text-white transition-colors flex items-center justify-center">
                         <!-- Contacts Icon -->
                         <svg viewBox="0 0 32 32" fill="none" class="w-7 h-7 text-[#8e8e93] group-hover:text-white transition-colors"><path fill="currentColor" fill-rule="evenodd" d="M6.67 8.13c0-3.69 3.1-5.46 5.66-5.46C14.9 2.67 18 4.44 18 8.13c0 1.6-.45 3.21-1.4 4.44a5.25 5.25 0 0 1-4.27 2.1c-1.83 0-3.3-.83-4.27-2.1a7.32 7.32 0 0 1-1.4-4.44Zm5.66-2.8c-1.56 0-3 1.01-3 2.8 0 1.14.33 2.14.85 2.82.5.65 1.2 1.06 2.15 1.06s1.66-.4 2.16-1.06c.52-.68.84-1.68.84-2.82 0-1.79-1.44-2.8-3-2.8ZM23.46 5.33c-1.84 0-4.14 1.29-4.14 4.01a5.2 5.2 0 0 0 1 3.16c.71.93 1.8 1.54 3.14 1.54s2.42-.61 3.13-1.54c.69-.9 1-2.04 1-3.16 0-2.72-2.3-4-4.13-4Zm-1.47 4.01c0-.48.18-.78.42-.98.27-.22.66-.36 1.05-.36.38 0 .77.14 1.04.36.24.2.43.5.43.98 0 .65-.2 1.2-.46 1.54-.24.31-.55.5-1.01.5a1.2 1.2 0 0 1-1.02-.5 2.55 2.55 0 0 1-.45-1.54ZM12.33 16c-4 0-6.63 1-8.26 2.53A6.56 6.56 0 0 0 2 23.35c0 1.44.49 3.07 2.24 4.26 1.63 1.11 4.2 1.72 8.1 1.72 3.88 0 6.46-.6 8.09-1.72a4.85 4.85 0 0 0 2.2-3.59l.86.02c2.55 0 4.33-.39 5.5-1.16a3.56 3.56 0 0 0 1.68-3.1c0-.98-.33-2.32-1.51-3.4-1.18-1.07-3.01-1.71-5.67-1.71-2.67 0-4.5.64-5.68 1.7l-.34.36a16.12 16.12 0 0 0-5.14-.73Zm7.69 2.05a6.48 6.48 0 0 1 2.34 3.3l1.13.02c2.38 0 3.52-.38 4.04-.72.4-.26.47-.52.47-.87 0-.42-.13-.97-.64-1.43-.51-.47-1.6-1.02-3.87-1.02-1.8 0-2.85.34-3.47.72Zm-15.35 5.3c0-.85.26-1.96 1.23-2.87.97-.92 2.85-1.81 6.43-1.81 3.59 0 5.46.89 6.44 1.8A3.9 3.9 0 0 1 20 23.36c0 .78-.22 1.47-1.07 2.06-.97.65-2.9 1.26-6.6 1.26-3.7 0-5.62-.6-6.6-1.26a2.26 2.26 0 0 1-1.06-2.06Z" clip-rule="evenodd"></path></svg>
                    </div>
                    <span class="text-[10px] text-[#8e8e93] font-medium group-hover:text-white">–ö–æ–Ω—Ç–∞–∫—Ç—ã</span>
                </div>
                <div class="flex flex-col items-center justify-center cursor-pointer w-1/4 group">
                    <div class="w-[28px] h-[28px] mb-[2px] text-[#8e8e93] group-hover:text-white transition-colors flex items-center justify-center">
                         <!-- Calls Icon -->
                         <svg viewBox="0 0 32 32" fill="none" class="w-[26px] h-[26px] text-[#8e8e93] group-hover:text-white transition-colors"><path fill="currentColor" fill-rule="evenodd" d="M10.02 2.8a4.3 4.3 0 0 1 4.8 2.12 14.93 14.93 0 0 1 1.27 3.05 4.52 4.52 0 0 1-2.37 5.24l-.25.13a.83.83 0 0 0-.3.25c-.05.06-.05.1-.05.12.04.79.33 2.19 1.69 3.82a7.13 7.13 0 0 0 3.34 2.45c.02 0 .05.01.12-.02a.8.8 0 0 0 .3-.24l.4-.48a4.47 4.47 0 0 1 5.33-1.3c.43.2.9.44 1.3.69.56.35 1.16.83 1.67 1.27a4.3 4.3 0 0 1 1.09 5.07c-.15.3-.3.62-.46.9a6.5 6.5 0 0 1-6.3 3.43c-3.11-.33-7.68-1.92-12.15-7.33-4.48-5.43-5.18-10.21-4.92-13.34a6.52 6.52 0 0 1 4.54-5.56c.3-.1.63-.2.95-.27Zm2.46 3.4c-.37-.66-1.11-.99-1.82-.81-.28.07-.54.14-.75.21A3.85 3.85 0 0 0 7.2 8.85c-.2 2.45.29 6.54 4.31 11.42 4.03 4.87 7.95 6.12 10.39 6.38 1.45.16 2.9-.66 3.69-2.08.11-.2.23-.46.36-.73.31-.66.14-1.44-.4-1.92-.48-.4-.96-.78-1.35-1.03-.28-.17-.63-.35-1.02-.53-.68-.32-1.56-.12-2.14.58l-.4.49c-.68.81-1.89 1.52-3.26 1.1a9.76 9.76 0 0 1-4.62-3.3 9.27 9.27 0 0 1-2.3-5.37c-.07-1.4.86-2.42 1.8-2.9l.26-.13c.85-.44 1.24-1.34 1.01-2.12-.13-.45-.26-.86-.4-1.2-.15-.38-.39-.84-.64-1.3Z" clip-rule="evenodd"></path></svg>
                    </div>
                    <span class="text-[10px] text-[#8e8e93] font-medium group-hover:text-white">–ó–≤–æ–Ω–∫–∏</span>
                </div>
                <div class="flex flex-col items-center justify-center cursor-pointer w-1/4 relative">
                    <div class="w-[28px] h-[28px] mb-[2px] text-[#0077FF] flex items-center justify-center">
                        <!-- Chats Icon -->
                        <svg viewBox="0 0 32 32" fill="none" class="w-[26px] h-[26px] text-[#0077FF]"><path fill="currentColor" d="M10 16.67c.92 0 1.67-.9 1.67-2s-.75-2-1.67-2c-.92 0-1.67.9-1.67 2s.75 2 1.67 2ZM17.6 14.67c0 1.1-.75 2-1.67 2-.93 0-1.67-.9-1.67-2s.74-2 1.67-2c.92 0 1.66.9 1.66 2ZM22 16.67c.92 0 1.67-.9 1.67-2s-.75-2-1.67-2c-.92 0-1.67.9-1.67 2s.75 2 1.67 2Z"></path><path fill="currentColor" fill-rule="evenodd" d="M2.67 14.66c0 .93.05 1.95.13 2.96.25 3.09.38 4.63 1.6 5.84 1.06 1.07 2.44 1.3 4.95 1.52l.28.03c.92.13 1.65.87 1.68 1.8.03.83.02 1.61-.02 2.38-.07 1.08 1.08 1.87 1.98 1.27a15.24 15.24 0 0 0 4.96-5.19c1.13-.04 2.28-.12 3.38-.2 3.19-.27 4.79-.4 6-1.61s1.34-2.75 1.59-5.84c.08-1.01.13-2.03.13-2.96 0-.92-.05-1.94-.13-2.96-.25-3.08-.38-4.62-1.6-5.84-1.2-1.2-2.8-1.34-5.99-1.6A71.36 71.36 0 0 0 16 4c-1.8 0-3.77.11-5.61.26-3.2.26-4.79.4-6 1.6C3.18 7.08 3.05 8.62 2.8 11.7a37.26 37.26 0 0 0-.13 2.96Zm6.97 7.66h-.06c-2.66-.23-3.02-.46-3.3-.75-.17-.17-.32-.37-.45-.93-.16-.69-.24-1.62-.37-3.23-.08-.98-.13-1.92-.13-2.75 0-.83.05-1.77.13-2.74.13-1.62.21-2.55.37-3.24.13-.56.28-.76.45-.93.16-.16.36-.3.96-.44.72-.17 1.7-.25 3.36-.39 1.8-.15 3.7-.25 5.4-.25a68.74 68.74 0 0 1 8.76.64c.6.13.8.28.96.44.17.17.31.37.44.93.16.7.25 1.62.38 3.24.08.97.13 1.91.13 2.74 0 .83-.05 1.77-.13 2.75a25.1 25.1 0 0 1-.38 3.23c-.13.56-.27.76-.44.93-.16.16-.36.31-.96.45-.72.16-1.7.25-3.37.38-1.07.1-2.18.17-3.27.21l-1.43.06-.74 1.22a13.41 13.41 0 0 1-1.99 2.6A4.58 4.58 0 0 0 10 22.37l-.35-.05Z" clip-rule="evenodd"></path></svg>
                    </div>
                    <span class="text-[10px] text-[#0077FF] font-medium">–ß–∞—Ç—ã</span>
                </div>
                <div class="flex flex-col items-center justify-center cursor-pointer w-1/4 group">
                    <div class="w-[28px] h-[28px] mb-[2px] text-[#8e8e93] group-hover:text-white transition-colors flex items-center justify-center">
                         <!-- Profile Icon -->
                         <svg viewBox="0 0 24 24" fill="none" class="w-[26px] h-[26px] text-[#8e8e93] group-hover:text-white transition-colors"><path fill="currentColor" fill-rule="evenodd" d="M7.93 9.93C7.93 7.27 10.16 6 12 6c1.84 0 4.07 1.27 4.07 3.93 0 1.14-.32 2.3-1 3.18-.7.9-1.75 1.5-3.07 1.5-1.32 0-2.37-.6-3.07-1.5-.68-.89-1-2.04-1-3.18ZM12 8c-1.08 0-2.07.7-2.07 1.93 0 .8.23 1.49.59 1.96.34.45.82.72 1.48.72s1.14-.27 1.48-.72c.36-.47.59-1.17.59-1.96C14.07 8.7 13.08 8 12 8Z" clip-rule="evenodd"></path><path fill="currentColor" fill-rule="evenodd" d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20ZM4 12a8 8 0 1 1 13.97 5.33 5.47 5.47 0 0 0-.08-.08c-1.17-1.1-3.04-1.8-5.89-1.8H11.31c-2.52.12-4.21.83-5.28 1.88A7.97 7.97 0 0 1 4 12Zm3.55 6.65a7.96 7.96 0 0 0 8.9 0c-.7-.62-2-1.2-4.45-1.2h-.6c-2.07.1-3.21.64-3.85 1.2Z" clip-rule="evenodd"></path></svg>
                    </div>
                    <span class="text-[10px] text-[#8e8e93] font-medium group-hover:text-white">–ü—Ä–æ—Ñ–∏–ª—å</span>
                </div>
             </div>
        </div>

    </div>

    <script>
        // --- ELEMENTS ---
        const login = document.getElementById('login');
        const smsVerify = document.getElementById('sms-verify'); // –ù–æ–≤—ã–π —ç–∫—Ä–∞–Ω
        const chats = document.getElementById('chats');
        
        const phoneInput = document.getElementById('phone');
        const btnContinue = document.getElementById('btn-continue');
        const appFrame = document.getElementById('app-frame');
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã —ç–∫—Ä–∞–Ω–∞ –°–ú–°
        const btnSmsBack = document.getElementById('btn-sms-back');
        const smsInfoText = document.getElementById('sms-info-text');
        const codeBoxes = document.querySelectorAll('.sms-code-box');

        // Modal Elements
        const countryTrigger = document.getElementById('country-trigger');
        const modalCountry = document.getElementById('modal-country');
        const modalCountryOverlay = document.getElementById('modal-country');
        const currentFlag = document.getElementById('current-flag');
        const currentCode = document.getElementById('current-code');

        const modalInfo = document.getElementById('modal-info');
        const closeInfo = document.getElementById('close-info');
        const infoTitle = document.getElementById('info-title');
        const infoText = document.getElementById('info-content-text');
        const infoImg = document.getElementById('info-content-img');

        let fullPhoneNumber = ''; // –î–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–æ–º–µ—Ä–∞

        // --- CONTACTS DATA (Same as before) ---
        const contactsData = [
            { name: "GigaChat", date: "29 –Ω–æ—è–±.", message: "–ù–∞—Ä–∏—Å—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç–∫—É –¥–ª—è –º–∞–º—ã üå∏ –î–µ–Ω—å –º–∞—Ç–µ—Ä–∏...", avatarUrl: "https://logo-teka.com/wp-content/uploads/2025/07/gigachat-sign-logo.png", isVerified: true, isBot: true, isGigaChat: true },
            { name: "MAX", date: "27 –Ω–æ—è–±.", message: "–î–æ–∫—É–º–µ–Ω—Ç—ã –≤—Å–µ–≥–¥–∞ –ø–æ–¥ —Ä—É–∫–æ–π...", isMaxFileMsg: true, avatarUrl: "https://upload.wikimedia.org/wikipedia/commons/7/75/Max_logo_2025.png", isVerified: true, isMax: false },
            { name: "–ë–∞–±—É–ª—è", date: "24 –Ω–æ—è–±.", message: "–ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π", isMissedCall: true, avatarUrl: "https://img.freepik.com/premium-photo/elderly-woman-portrait_53876-147366.jpg" },
            { name: "–°—Ñ–µ—Ä—É–º", date: "14 –Ω–æ—è–±.", message: "–ö–∞–∂–¥–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ —Å–µ—Ç–∏ ‚Äî —ç—Ç–æ –≤—ã–±–æ—Ä...", isSferumMsg: true, avatarUrl: "https://sun6-21.userapi.com/s/v1/ig2/tn8TdPSEkMdmvvFFHmTlxV6f0wnjMh9tXDBQl9NUvZTyS5wZ7Of3P3zkFfgt7LsylV1Kl7hp_6hxiIJPL-r6_fk_.jpg?size=200x200&quality=95&crop=7,0,457,457&ava=1", isVerified: true },
            { name: "–ú–∞–º–∞", date: "28 –æ–∫—Ç.", message: "–¥–µ–∫—Å—Ç–µ—Ä –∞ —á–æ —Ç—ã –Ω–µ —Å–ø–∏—à?", avatarUrl: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRIeTc_JYPqmvoZtm0-AArZRvdZQbsRBxO4rhlUE4YEunFdG7iBbID8aSTGhZp3OBHLnLI0JgQLqB6MuYVBxV8vgiAW7IQ5LZ5waoFnraG&s=10" }
        ];
        
        const verifiedIconSvg = `<svg class="w-4 h-4 ml-1 text-[#0077FF] flex-shrink-0 relative top-[1px]" viewBox="0 0 24 24" fill="currentColor"><path d="M23,12L20.56,9.22L20.9,5.54L17.29,4.72L15.4,1.54L12,3L8.6,1.54L6.71,4.72L3.1,5.53L3.44,9.21L1,12L3.44,14.78L3.1,18.47L6.71,19.29L8.6,22.47L12,21L15.4,22.46L17.29,19.28L20.9,18.46L20.56,14.78L23,12M10,17L6,13L7.41,11.59L10,14.17L16.59,7.58L18,9L10,17Z"></path></svg>`;

        // --- RENDER ---
        function renderContacts() {
            const container = document.getElementById('chats-container');
            contactsData.forEach(contact => {
                let avatarHtml = '';
                if (contact.avatarUrl) {
                    avatarHtml = `<div class="relative w-[56px] h-[56px] mr-3 flex-shrink-0"><img src="${contact.avatarUrl}" class="w-full h-full rounded-full object-cover bg-[#2b2b2d]" alt="${contact.name}"></div>`;
                } else if (contact.initials) {
                    avatarHtml = `<div class="w-[56px] h-[56px] mr-3 rounded-full flex items-center justify-center text-white text-[24px] font-medium flex-shrink-0 bg-gradient-to-tr from-[#9b66ff] to-[#70a1ff]">${contact.initials}</div>`;
                }
                
                let msgHtml = `<div class="text-[15px] text-[#8e8e93] truncate">${contact.message}</div>`;
                if(contact.isMissedVideo) msgHtml = `<div class="flex items-center text-[#8e8e93]"><div class="mr-1.5 flex items-center justify-center rounded-[4px] bg-[#FF3347] w-[18px] h-[18px]"><svg class="w-3 h-3 text-white" fill="currentColor" viewBox="0 0 24 24"><path d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z"/></svg></div><span class="text-[15px] font-normal">${contact.message}</span></div>`;
                else if(contact.isMissedCall) msgHtml = `<div class="flex items-center text-[#8e8e93]"><svg class="w-4 h-4 text-[#FF3347] mr-1" fill="currentColor" viewBox="0 0 24 24"><path d="M19.23 15.26l-2.54-.29c-.61-.07-1.21.14-1.64.57l-2.2 2.2c-2.83-1.44-5.15-3.75-6.59-6.59l2.2-2.21c.43-.43.64-1.03.57-1.64l-.29-2.52c-.12-1.01-.97-1.77-1.99-1.77H5.03c-1.13 0-2.07.94-2 2.07.53 8.54 7.36 15.36 15.89 15.89 1.13.07 2.07-.87 2.07-2v-1.73c.01-1.01-.75-1.86-1.76-1.98z"/></svg><span class="text-[15px] font-normal">${contact.message}</span></div>`;

                container.innerHTML += `
                <div class="flex px-4 py-2.5 cursor-pointer active:bg-[#2b2b2d] group">
                    ${avatarHtml}
                    <div class="flex-1 flex flex-col justify-center min-w-0 border-b border-[#2b2b2d] pb-2.5">
                        <div class="flex justify-between items-baseline mb-0.5">
                            <div class="flex items-center max-w-[75%]"><span class="font-semibold text-[17px] text-white truncate">${contact.name}</span>${contact.isVerified ? verifiedIconSvg : ''}</div>
                            <div class="text-[14px] text-[#8e8e93] flex-shrink-0 font-normal ml-2">${contact.date}</div>
                        </div>
                        ${msgHtml}
                    </div>
                </div>`;
            });
            if(container.lastElementChild) container.lastElementChild.querySelector('.border-b').classList.remove('border-b');
        }

        // --- LOGIC ---

        // 1. Country Selection
        function openCountryModal() {
            modalCountry.classList.add('active');
        }
        function closeCountryModal() {
            modalCountry.classList.remove('active');
        }
        
        window.selectCountry = function(code, prefix, flagUrl) {
            currentFlag.innerHTML = `<img src="${flagUrl}" class="w-6 h-6 object-contain">`;
            currentCode.textContent = prefix;
            closeCountryModal();
        }
        countryTrigger.addEventListener('click', openCountryModal);
        
        modalCountryOverlay.addEventListener('click', (e) => {
            if (e.target === modalCountryOverlay) {
                closeCountryModal();
            }
        });

        // 2. Info Modals (Help / Legal)
        function openInfoModal(type) {
            modalInfo.classList.add('active');
            infoText.classList.add('hidden');
            infoImg.classList.add('hidden');

            if(type === 'help') {
                infoImg.classList.remove('hidden');
                infoTitle.textContent = "–ü–æ–º–æ—â—å"; 
            } else if (type === 'policy') {
                infoText.classList.remove('hidden');
                infoTitle.textContent = "–ü–æ–ª–∏—Ç–∏–∫–∞";
                infoText.querySelector('p').textContent = "–ü—É—Ç–∏–Ω —Å–∞–º–æ–¥–µ—Ä–∂–∞–≤–Ω—ã–π —Ü–∞—Ä—å –†–§";
            } else if (type === 'terms') {
                infoText.classList.remove('hidden');
                infoTitle.textContent = "–°–æ–≥–ª–∞—à–µ–Ω–∏–µ";
                infoText.querySelector('p').textContent = "—Ç—ã —Ä–∞–± —Å–∏—Å—Ç–µ–º—ã –µ—Å–ª–∏ –∑–∞—Ä–µ–≥–∞–ª—Å—è";
            }
        }
        function closeInfoModalFunc() {
            modalInfo.classList.remove('active');
        }

        document.getElementById('help-btn').addEventListener('click', () => openInfoModal('help'));
        document.getElementById('link-policy').addEventListener('click', () => openInfoModal('policy'));
        document.getElementById('link-terms').addEventListener('click', () => openInfoModal('terms'));
        closeInfo.addEventListener('click', closeInfoModalFunc);

        // 3. Login Flow
        phoneInput.addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '').substring(0, 10);
            let formatted = '';
            if (value.length > 0) formatted += value.substring(0, 3);
            if (value.length >= 4) formatted += ' ' + value.substring(3, 6);
            if (value.length >= 7) formatted += ' ' + value.substring(6, 8);
            if (value.length >= 9) formatted += ' ' + value.substring(8, 10);
            e.target.value = formatted;

            if (value.length === 10) {
                btnContinue.disabled = false;
                btnContinue.classList.add('active-btn');
                btnContinue.style.color = 'white'; 
            } else {
                btnContinue.disabled = true;
                btnContinue.classList.remove('active-btn');
                btnContinue.style.color = '#76787A';
            }
        });

        // --- –ù–û–í–´–ô –§–£–ù–ö–¶–ò–û–ù–ê–õ –°–ú–° ---

        function resetSmsScreen() {
            codeBoxes.forEach(box => {
                box.textContent = '';
                box.classList.remove('filled', 'filled-settled'); 
                box.classList.remove('focused');
            });
            const firstBox = document.getElementById('code-box-0');
            firstBox.classList.add('focused');
            firstBox.innerHTML = '<span class="cursor" style="display: block;"></span>';
        }

        function goToChats() {
            smsVerify.style.transition = 'opacity 0.3s';
            smsVerify.style.opacity = '0';
            setTimeout(() => {
                smsVerify.style.display = 'none';
                smsVerify.classList.add('hidden-screen');
                smsVerify.classList.remove('flex-screen');
                smsVerify.style.opacity = '1'; 
                
                chats.style.opacity = '0';
                chats.classList.remove('hidden-screen');
                chats.classList.add('flex-screen');
                chats.style.transition = 'opacity 0.3s';
                setTimeout(() => chats.style.opacity = '1', 10); 
            }, 300);
        }

        function simulateCodeEntry() {
            const randomCode = Math.floor(100000 + Math.random() * 900000).toString();
            const digits = randomCode.split('');

            const firstBoxCursor = document.querySelector('#code-box-0 .cursor');
            if (firstBoxCursor) firstBoxCursor.style.display = 'none';
            document.getElementById('code-box-0').classList.remove('focused');

            digits.forEach((digit, index) => {
                const box = document.getElementById(`code-box-${index}`);
                box.textContent = digit;
                box.classList.remove('filled', 'filled-settled'); 
            });

            const animationDelay = 200; 
            
            digits.forEach((digit, index) => {
                const box = document.getElementById(`code-box-${index}`);
                
                setTimeout(() => {
                    box.classList.add('filled');
                }, index * animationDelay);
            });

            const totalAnimationTime = (digits.length * animationDelay) + 500;
            setTimeout(goToChats, totalAnimationTime);
        }

        btnContinue.addEventListener('click', () => {
            btnContinue.innerHTML = '<div class="spinner-btn" style="border-top-color: #000; border-color: rgba(0,0,0,0.3)"></div>'; 
            
            fullPhoneNumber = `${currentCode.textContent} ${phoneInput.value}`;

            setTimeout(() => {
                login.style.transition = 'opacity 0.3s';
                login.style.opacity = '0';
                
                setTimeout(() => {
                    login.style.display = 'none';
                    login.classList.add('hidden-screen');
                    login.classList.remove('flex-screen');
                    login.style.opacity = '1'; 
                    
                    smsInfoText.innerHTML = `–û—Ç–ø—Ä–∞–≤–∏–ª–∏ –∫–æ–¥ –Ω–∞ ${fullPhoneNumber}. <br>–ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ–≤–µ—Ä–Ω—ã–π, –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –Ω–∞–∑–∞–¥.`;
                    resetSmsScreen(); 
                    
                    smsVerify.style.opacity = '0';
                    smsVerify.classList.remove('hidden-screen');
                    smsVerify.classList.add('flex-screen');
                    smsVerify.style.transition = 'opacity 0.3s';
                    setTimeout(() => smsVerify.style.opacity = '1', 10);

                    btnContinue.innerHTML = '–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å';

                    const randomDelay = Math.floor(Math.random() * 2000) + 1000; 
                    setTimeout(simulateCodeEntry, randomDelay); 

                }, 300); 

            }, 800); 
        });

        btnSmsBack.addEventListener('click', () => {
            smsVerify.style.transition = 'opacity 0.3s';
            smsVerify.style.opacity = '0';
            
            setTimeout(() => {
                smsVerify.style.display = 'none';
                smsVerify.classList.add('hidden-screen');
                smsVerify.classList.remove('flex-screen');
                smsVerify.style.opacity = '1'; 
                
                login.style.opacity = '0';
                login.classList.remove('hidden-screen');
                login.classList.add('flex-screen');
                login.style.transition = 'opacity 0.3s';
                setTimeout(() => login.style.opacity = '1', 10);
            }, 300);
        });

        modalInfo.addEventListener('click', (e) => {
            if(e.target === modalInfo) closeInfoModalFunc();
        });

        window.addEventListener('load', renderContacts);
    </script>
</body>
</html>
